<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Rail + Bin Builder</title>

    <!-- PACK:INLINE_CSS -->
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="app">
      <div class="views" id="views">
        <div class="view" data-view="three">
          <div class="hud">3D</div>
          <button class="fit" id="fit-three" data-fit="three" type="button">Fit view</button>
          <canvas id="three"></canvas>
          <div class="legend">
            <div class="legend-grid">
              <div class="legend-item"><span class="legend-swatch legend-post"></span>Posts</div>
              <div class="legend-item"><span class="legend-swatch legend-lintel"></span>Lintels</div>
              <div class="legend-item"><span class="legend-swatch legend-rail"></span>Rails</div>
              <div class="legend-item"><span class="legend-swatch legend-support"></span>Supports</div>
              <div class="legend-item"><span class="legend-swatch legend-bin"></span>Bins</div>
            </div>
          </div>
        </div>
        <div class="view" data-view="plan">
          <div class="hud">TOP / Plan (X×Z)</div>
          <canvas id="plan"></canvas>
          <div class="legend">Openings &amp; rail footprints</div>
        </div>
        <div class="view" data-view="front">
          <div class="hud">FRONT / Elevation (X×Y)</div>
          <canvas id="front"></canvas>
          <div class="legend">Overall W/H, openings, clearances</div>
        </div>
        <div class="view" data-view="side">
          <div class="hud">SIDE / Elevation (Z×Y)</div>
          <canvas id="side"></canvas>
          <div class="legend">Depth &amp; rail length</div>
        </div>
      </div>
      <div class="panel">
        <div class="toolbar">
          <span>View:</span>
          <button class="seg" type="button" data-view="quad">Quad</button>
          <button class="seg" type="button" data-view="three">3D</button>
          <button class="seg" type="button" data-view="plan">Plan</button>
          <button class="seg" type="button" data-view="front">Front</button>
          <button class="seg" type="button" data-view="side">Side</button>
          <button class="pill" type="button" id="toggleQuad3D">Quad ⇄ 3D</button>
          <button class="pill" type="button" id="toggleCutList">Cut List</button>
        </div>
        <div id="controlsRoot">
          <form id="controls">
            <label>Height <input id="height-input" type="number" /></label>
            <label>Depth <input id="depth-input" type="number" /></label>
            <label>Post <input id="post-input" type="number" /></label>
            <label>Pattern <input id="pattern-input" type="text" /></label>
            <label><input id="rearFrame-toggle" type="checkbox" /> Rear Frame</label>
            <label><input id="showBins-toggle" type="checkbox" /> Show Bins</label>
            <label><input id="overlay-toggle" type="checkbox" /> Overlays</label>

            <!-- MVP: Columns -->
            <section class="grp" id="grp-columns">
              <h2>Columns &amp; Openings</h2>
              <div class="row">
                <button id="btnAddCol" class="pill" type="button">+ Add Column</button>
                <button id="btnRemoveCol" class="pill" type="button">− Remove Column</button>
              </div>
              <div id="columnsList" class="ctl" style="gap:.5rem"></div>
              <p class="dim">Tip: columns edit writes back to <code>patternText</code>.</p>
            </section>

            <!-- MVP: Rows -->
            <section class="grp" id="grp-rows">
              <h2>Rows</h2>
              <div class="row">
                <button id="btnAddRow" class="pill" type="button">+ Add Row</button>
                <button id="btnRemoveRow" class="pill" type="button">− Remove Row</button>
              </div>
              <div id="rowsList" class="ctl" style="gap:.5rem"></div>
            </section>

            <!-- Opening planner (height-based) -->
            <section class="grp" id="grp-opening-planner">
              <h2>Opening Planner (height)</h2>
              <div class="row">
                <div class="ctl" style="width:160px">
                  <span>Item target height (mm)</span>
                  <input type="number" id="itemTargetHeight" min="0" step="1" />
                </div>
                <div class="ctl" style="width:160px">
                  <span>Top clearance (mm)</span>
                  <input type="number" id="openClearTop" min="0" step="1" />
                </div>
                <div class="ctl" style="width:160px">
                  <span>Sight clearance (mm)</span>
                  <input type="number" id="openSightClear" min="0" step="1" />
                </div>
                <!-- optional -->
                <div class="ctl" style="width:160px">
                  <span>Rail safety (mm)</span>
                  <input type="number" id="railSafety" min="0" step="1" />
                </div>
              </div>
              <p class="dim">Target per row = max(Bin height, Item height) + Top clearance + Sight clearance + Rail safety</p>
            </section>

            <!-- MVP: Rails -->
            <section class="grp" id="grp-rails">
              <h2>Rails</h2>
              <label class="l"><input type="checkbox" id="twoRails" /> Two rails per opening (L/R)</label>
              <label class="l"><input type="checkbox" id="bottomRowRails" /> Bottom row rails</label>
            </section>

            <!-- MVP: Bins -->
            <section class="grp" id="grp-bins">
              <h2>Bins</h2>
              <label class="l"><input type="checkbox" id="showBinsCtl" /> Show bins</label>
              <div class="ctl" style="max-width:200px">
                <span>Bin lip thickness (mm)</span>
                <input type="number" id="binLipThick" min="0" step="0.1" />
              </div>
            </section>
          </form>
        </div>
        <div id="cutListPanel" hidden>
          <div class="cut-list-header">
            <h2>Cut List</h2>
            <button class="pill" type="button" id="closeCutList">Close</button>
          </div>
          <p id="cutListPlaceholder">Cut list details will appear here.</p>
        </div>
      </div>
    </div>

    <script type="module" src="./src/main.js"></script>
    <!-- PACK:INLINE_JS -->
  </body>
</html>
